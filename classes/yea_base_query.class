class yea_base_query definition
  public
  final
  create public .

  public section.

    interfaces yea_query .

    methods constructor
      importing
        !uri_query type string .
  protected section.
  private section.

    data _keys type yea_key_values .
endclass.



class yea_base_query implementation.


* <SIGNATURE>---------------------------------------------------------------------------------------+
* | Instance Public Method YEA_BASE_QUERY->CONSTRUCTOR
* +-------------------------------------------------------------------------------------------------+
* | [--->] URI_QUERY                      TYPE        STRING
* +--------------------------------------------------------------------------------------</SIGNATURE>
  method constructor.
    " data(uri_clean) = cl_http_utility=>if_http_utility~unescape_url( uri_query ).
    split uri_query at '&' into table data(query_splits).
    loop at query_splits assigning field-symbol(<u_q>).
      split <u_q> at '=' into table data(query_values).
      data kv type yea_key_value.
      try.
          kv-key   = cl_http_utility=>if_http_utility~unescape_url( query_values[ 1 ] ).
          kv-value = cl_http_utility=>if_http_utility~unescape_url( query_values[ 2 ] ).
        catch cx_root.
      endtry.
      if ( kv is not initial ).
        append kv to _keys.
        clear kv.
      endif.
    endloop.
  endmethod.
endclass.

